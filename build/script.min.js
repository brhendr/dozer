/*! bulldozer 2016-10-03 */
function startGame(a){function b(a,b){for(i=0;i<a.height;i++)for(j=0;j<a.width;j++)b.append('<div class="box" id="'+j+"-"+i+'"></div>');boxWidth=100/a.width+"%",$(".box").width(boxWidth),c(a),k(a),$(document).keydown(function(b){38!=b.which&&39!=b.which&&40!=b.which&&37!=b.which||(b.preventDefault(),d(b.which,a))}),$(".control-up").on("click",function(){d(38,a)}),$(".control-right").on("click",function(){d(39,a)}),$(".control-down").on("click",function(){d(40,a)}),$(".control-left").on("click",function(){d(37,a)})}function c(a){$(".box").height($(".box").width())}function d(a,b){var c=$(".active").attr("id");c=c.split("-"),c[0]=parseInt(c[0]),c[1]=parseInt(c[1]),38==a?0!=c[1]&&(c[1]=c[1]-1,e(c[0]+"-"+c[1],"up")):39==a?c[0]!=b.width-1&&(c[0]=c[0]+1,e(c[0]+"-"+c[1],"right")):40==a?c[1]!=b.height-1&&(c[1]=c[1]+1,e(c[0]+"-"+c[1],"down")):37==a&&0!=c[0]&&(c[0]=c[0]-1,e(c[0]+"-"+c[1],"left"))}function e(a,b){$("#"+a).hasClass("rock")?f(a,b):$("#"+a).hasClass("wall")||($(".active").removeClass("active").removeClass("up").removeClass("down").removeClass("right").removeClass("left"),$("#"+a).addClass("active").addClass(b))}function f(a,b){var c=$("#"+a).attr("id");switch(pos=c.split("-"),pos[0]=parseInt(pos[0]),pos[1]=parseInt(pos[1]),b){case"up":pos[1]=pos[1]-1;var d=pos[0]+"-"+pos[1];pos[1]!=-1&&g(d,a,b);break;case"down":pos[1]=pos[1]+1;var d=pos[0]+"-"+pos[1];pos[1]!=m.height&&g(d,a,b);break;case"right":pos[0]=pos[0]+1;var d=pos[0]+"-"+pos[1];pos[0]!=m.width&&g(d,a,b);break;case"left":pos[0]=pos[0]-1;var d=pos[0]+"-"+pos[1];pos[0]!=-1&&g(d,a,b);break;default:console.log("error")}}function g(a,b,c){var d=$("#"+a);d.hasClass("wall")||d.hasClass("rock")||($("#"+b).removeClass("rock"),d.addClass("rock"),$(".active").removeClass("active").removeClass("up").removeClass("down").removeClass("right").removeClass("left"),$("#"+b).addClass("active").addClass(c),setTimeout(function(){h()},500))}function h(){console.log("checkWin()");var b=$(".goal").length,c=$(".goal.rock").length;if(b==c){var d=confirm("You Win! Are you ready for the next level?");d&&(a++,window.location.href="index.html?"+a)}}function k(a){for(var b=0;b<a.walls.length;b++)$("#"+a.walls[b]).addClass("wall");for(var b=0;b<a.rocks.length;b++)$("#"+a.rocks[b]).addClass("rock");for(var b=0;b<a.goals.length;b++)$("#"+a.goals[b]).addClass("goal");$("#"+a.start).addClass("active").addClass("right")}$(".level-number").html(a);var l=$("#map");$(document).unbind("keydown"),l.html("");var m;void 0!=levelObj[a]?(b(levelObj[a],l),m=levelObj[a]):(b(levelObj[1],l),m=levelObj[1],a=1),$(window).resize(function(){c()})}var query=window.location.search.slice(1),gameLevel=query.trimLeft("/");startGame(""==gameLevel?1:gameLevel),$("button").on("click",function(){startGame(gameLevel)});